# ===============================
# SPRING MAIN APPLICATION SETTINGS
# ===============================
spring.main.allow-bean-definition-overriding=true
spring.application.name=university-library-system
spring.profiles.active=dev

# Enable scheduled tasks (for auto-exit when library closes)
spring.task.scheduling.enabled=true

# ===============================
# DATABASE CONNECTION SETTINGS
# ===============================
spring.datasource.url=jdbc:mysql://localhost:3306/university_library_db?allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=ousman@bah123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===============================
# JPA / HIBERNATE SETTINGS
# ===============================
# Disable automatic schema creation (Flyway handles DB migrations)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.jdbc.fetch_size=25

logging.level.org.springframework.security=DEBUG
implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'
spring.jackson.serialization.write-dates-as-timestamps=false
# ===============================
# FLYWAY SETTINGS
# ===============================
# Enable Flyway
spring.flyway.enabled=true
# Marks existing DB as baseline if needed
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
# Validates applied migrations
spring.flyway.validate-on-migrate=true



# ===============================
# CONNECTION POOL SETTINGS
# ===============================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000

# ===============================
# SERVER SETTINGS
# ===============================
server.port=8080
server.servlet.context-path=/api/v1

# ===============================
# REDIS / CACHE CONFIGURATION
# ===============================
#spring.cache.type=redis
#spring.redis.host=localhost
#spring.redis.port=6379
#spring.redis.timeout=60000
#spring.redis.lettuce.pool.max-active=10
#spring.redis.lettuce.pool.max-idle=5
#spring.redis.lettuce.pool.min-idle=1
#spring.redis.lettuce.pool.max-wait=1000

# ===============================
# DEV TOOLS
# ===============================
spring.devtools.restart.enabled=true

# ===============================
# FILE STORAGE CONFIGURATION
# ===============================
storage.location=./uploads
storage.max-file-size=15MB
storage.allowed-types=image/jpeg,image/png,application/pdf

# ===============================
# SECURITY SETTINGS
# ===============================
jwt.secret=k8fW9m3Q2vL1ZtGxH9YtQm7sPq1K0aLrR5J4uH2v3Y0=
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-token.expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ===============================
# LOGGING
# ===============================
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.com.university=DEBUG
logging.level.org.springframework.beans.factory.support=DEBUG
